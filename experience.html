<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experience ðŸŽ“ Faith Culas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="markdown-renderer.js"></script>
</head>

<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand" id="nav-name">[Your Name]</div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="papers.html">Publications</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="experience.html" class="active">Experience</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <section class="page-header">
            <div class="container">
                <h1>Experience</h1>
                <p>My academic and professional journey</p>
            </div>
        </section>

        <section class="timeline-section">
            <div class="container" id="experience-content">
                <h2>Loading experience...</h2>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p id="footer-text">&copy; 2025 [Your Name]. All rights reserved.</p>
        </div>
    </footer>

    <script>
        async function loadName() {
            const response = await fetch('content/profile.md');
            const text = await response.text();
            const lines = text.split('\n');
            let name = '';
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].startsWith('## Name')) {
                    name = lines[i + 1].trim();
                    break;
                }
            }
            document.getElementById('nav-name').textContent = name;
            document.getElementById('footer-text').textContent = `Â© 2025 ${name}. All rights reserved.`;
        }

        async function loadExperience() {
            const response = await fetch('content/experience.md');
            const text = await response.text();
            const sections = text.split('---');

            const container = document.getElementById('experience-content');
            container.innerHTML = '';

            sections.forEach(section => {
                const lines = section.trim().split('\n');
                let currentSection = '';
                let items = [];
                let currentItem = {};

                lines.forEach(line => {
                    if (line.startsWith('## Education')) {
                        currentSection = 'Education';
                    } else if (line.startsWith('## Work Experience')) {
                        currentSection = 'Work Experience';
                    } else if (line.startsWith('### ')) {
                        if (currentItem.title) items.push(currentItem);
                        currentItem = { title: line.replace('### ', '') };
                    } else if (line.includes('**Institution:**')) {
                        currentItem.institution = line.split('**Institution:**')[1].trim();
                    } else if (line.includes('**Date:**')) {
                        currentItem.date = line.split('**Date:**')[1].trim();
                    } else if (line.includes('**Description:**')) {
                        currentItem.description = line.split('**Description:**')[1].trim();
                    }
                });
                if (currentItem.title) items.push(currentItem);

                if (currentSection && items.length > 0) {
                    const sectionDiv = document.createElement('div');
                    const icon = currentSection === 'Education'
                        ? '<i class="fas fa-graduation-cap"></i>'
                        : '<i class="fas fa-briefcase"></i>';
                    sectionDiv.innerHTML = `<h2 class="section-title-with-icon">${icon} ${currentSection}</h2>`;

                    const timeline = document.createElement('div');
                    timeline.className = 'timeline';

                    items.forEach(item => {
                        const timelineItem = document.createElement('div');
                        timelineItem.className = 'timeline-item';
                        timelineItem.innerHTML = `
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <span class="timeline-date">${item.date || ''}</span>
                                <h3>${item.title}</h3>
                                <p class="institution">${item.institution || ''}</p>
                                <p>${item.description || ''}</p>
                            </div>
                        `;
                        timeline.appendChild(timelineItem);
                    });

                    sectionDiv.appendChild(timeline);
                    container.appendChild(sectionDiv);
                }
            });
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadName();
            loadExperience();
        });
    </script>
</body>

</html>